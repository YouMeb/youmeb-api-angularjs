!function(window,angular){"use strict";function forEach(arr,fn){if(Array.prototype.forEach)Array.prototype.forEach.call(arr,fn);else{var i,len;for(i=0,len=arr.length;len>i;i+=1)fn(arr[i])}}angular.module("youmeb",[]).service("$youmeb",["$http","$q",function($http,$q){var generateUrl,request,routes,api;this.api=api={},this.generateUrl=generateUrl=function(key,params){var route;if(routes.hasOwnProperty(key))return route=routes[key],route.path.replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g,function(_,slash,format,key,capture,optional){return slash=slash||"",(optional?"":slash)+params[key]})},this.request=request=function(method,key,params,data){switch(arguments.length){case 1:key=method,method=void 0,params={},data={};break;case 3:"object"==typeof key?(data=params,params=key,key=method,method=void 0):data={};break;default:return}var route=routes[key],deferred=$q.defer();return method||(method=~route.methods.indexOf("all")?"POST":route.methods.shift()),method=method.toUpperCase(),$http({method:method,url:generateUrl(key,params),data:data}).success(function(){deferred.resolve.apply(deferred,arguments)}).error(function(){deferred.reject.apply(deferred,arguments)}),deferred.promise},this.getRoutes=function(){return routes},this.promise=$http.get("/youmeb/routes.json").success(function(data){routes=data;var keys=(Object.keys?function(){return Object.keys(routes)}:function(){var i,keys=[];for(i in routes)routes.hasOwnProperty(i)&&keys.push(i);return keys})().sort();forEach(keys,function(key){var names=key.replace(/\\\./g,"ï¿¿").split("."),last=names.pop(),parent_=api;forEach(names,function(name){name=name.replace(/\uffff/g,"."),parent_[name]||(parent_[name]={}),parent_=parent_[name]}),last&&(parent_[last]=function(method,params,data){var args;return args="object"==typeof method?[key,method||{},params||{}]:[method,key,params||{},data||{}],request.apply(this,args)})})})}])}(this,this.angular);